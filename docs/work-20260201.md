# Seri Arcade - 전체 구현 현황 레퍼런스

> 최종 업데이트: 2026-02-21
> 이 문서는 이후 개발 시 참고할 수 있도록 현재 구현된 전체 내용을 정리한 것입니다.

---

## 목차

1. [프로젝트 구조](#1-프로젝트-구조)
2. [기술 스택 및 설정](#2-기술-스택-및-설정)
3. [게임 엔진](#3-게임-엔진)
4. [게임 레지스트리](#4-게임-레지스트리)
5. [게임별 상세 구현](#5-게임별-상세-구현)
6. [UI 컴포넌트](#6-ui-컴포넌트)
7. [상태 관리 (Zustand)](#7-상태-관리-zustand)
8. [유틸리티 라이브러리](#8-유틸리티-라이브러리)
9. [라우팅 및 페이지](#9-라우팅-및-페이지)
10. [디자인 시스템](#10-디자인-시스템)
11. [난이도 시스템](#11-난이도-시스템)
12. [GP 시스템](#12-gp-시스템)
13. [설정 시스템](#13-설정-시스템)
14. [개발 시 주의사항](#14-개발-시-주의사항)

---

## 1. 프로젝트 구조

```
seri_game/
├── portal/                          # Next.js 16 웹 포털
│   ├── package.json
│   ├── tsconfig.json
│   ├── next.config.ts
│   ├── src/
│   │   ├── app/
│   │   │   ├── globals.css          # Tailwind v4 테마 + 커스텀 CSS
│   │   │   ├── layout.tsx           # 루트 레이아웃 (Sidebar + Main)
│   │   │   ├── page.tsx             # 홈 페이지
│   │   │   └── play/[gameId]/
│   │   │       └── page.tsx         # 게임 플레이 페이지
│   │   ├── engine/
│   │   │   ├── BaseGame.ts          # 추상 게임 클래스
│   │   │   ├── InputManager.ts      # 키보드/마우스 입력
│   │   │   └── types.ts             # GameConfig, GameStatus, GameCallbacks
│   │   ├── games/
│   │   │   ├── index.ts             # 게임 레지스트리 (26개)
│   │   │   ├── pong/PongGame.ts
│   │   │   ├── snake/SnakeGame.ts
│   │   │   ├── tetris/
│   │   │   │   ├── TetrisGame.ts
│   │   │   │   └── blocks.ts
│   │   │   ├── space-invaders/SpaceInvadersGame.ts
│   │   │   ├── falling-sand/FallingSandGame.ts
│   │   │   ├── breakout/BreakoutGame.ts
│   │   │   ├── 2048/Game2048.ts
│   │   │   ├── asteroids/AsteroidsGame.ts
│   │   │   ├── pacman/PacManGame.ts
│   │   │   ├── solitaire/SolitaireGame.ts
│   │   │   ├── connect4/Connect4Game.ts
│   │   │   ├── tower-defense/TowerDefenseGame.ts
│   │   │   ├── rhythm/RhythmGame.ts
│   │   │   ├── wordle/WordleGame.ts
│   │   │   ├── checkers/CheckersGame.ts
│   │   │   ├── sudoku/SudokuGame.ts
│   │   │   ├── memory-match/MemoryMatchGame.ts
│   │   │   ├── hangman/HangmanGame.ts
│   │   │   ├── bubble-shooter/BubbleShooterGame.ts
│   │   │   ├── typing/TypingGame.ts
│   │   │   ├── brick-builder/BrickBuilderGame.ts
│   │   │   ├── sokoban/SokobanGame.ts
│   │   │   ├── simon-says/SimonSaysGame.ts
│   │   │   ├── doodle-jump/DoodleJumpGame.ts
│   │   │   ├── whack-a-mole/WhackAMoleGame.ts
│   │   │   └── pipe-puzzle/PipePuzzleGame.ts
│   │   ├── components/
│   │   │   ├── layout/
│   │   │   │   ├── Sidebar.tsx
│   │   │   │   ├── UserPanel.tsx
│   │   │   │   ├── GameList.tsx
│   │   │   │   ├── GameListItem.tsx
│   │   │   │   └── SettingsModal.tsx
│   │   │   └── game/
│   │   │       ├── GameCanvas.tsx
│   │   │       └── GameOverlay.tsx
│   │   ├── config/
│   │   │   └── constants.ts
│   │   ├── store/
│   │   │   ├── useGpStore.ts
│   │   │   └── useSettingsStore.ts
│   │   └── lib/
│   │       ├── gp.ts
│   │       └── settings.ts
│   └── public/
│       └── images/avatars/          # 6개 아바타 PNG
├── game/                            # 원본 Python/Pygame 게임 (참고용)
│   ├── ping_pong/
│   ├── snake/
│   ├── space_Invaders/
│   ├── tetris/
│   ├── falling_sand/
│   ├── clock/
│   └── turtle/
├── README.md                        # 한국어 README
└── README-en.md                     # 영어 README
```

---

## 2. 기술 스택 및 설정

### 의존성 (package.json)

| 패키지 | 버전 | 용도 |
|--------|------|------|
| next | 16.1.6 | App Router, Turbopack |
| react / react-dom | 19.2.3 | UI 렌더링 |
| zustand | ^5.0.11 | 상태 관리 |
| tailwindcss | ^4 | 스타일링 (PostCSS) |
| typescript | ^5 | 타입 시스템 |

### 스크립트

```bash
npm run dev      # 개발 서버 (Turbopack, localhost:3000)
npm run build    # 프로덕션 빌드
npm run start    # 프로덕션 서버
npm run lint     # ESLint
```

### TypeScript 설정

- Target: ES2017
- Path alias: `@/*` -> `./src/*`
- Strict mode 활성화
- Module resolution: bundler

### Next.js 설정

- 기본 설정 사용 (next.config.ts 비어있음)
- Turbopack 기본 활성화 (Next.js 16)

---

## 3. 게임 엔진

### 3.1 타입 정의 (`engine/types.ts`)

```typescript
interface GameConfig {
  id: string;
  width: number;
  height: number;
  fps: number;
  backgroundColor: string;
}

type GameStatus = "idle" | "running" | "paused" | "game_over";

interface GameCallbacks {
  onScoreChange: (score: number) => void;
  onStatusChange: (status: GameStatus) => void;
  onGameOver: (finalScore: number) => void;
}
```

### 3.2 BaseGame (`engine/BaseGame.ts`)

모든 게임이 상속하는 추상 클래스. Fixed-timestep 게임 루프 구현.

**추상 메서드 (각 게임에서 반드시 구현):**
- `init(): void` - 초기 상태 설정
- `update(dt: number): void` - 게임 로직 갱신 (고정 타임스텝)
- `draw(): void` - 프레임 렌더링
- `reset(): void` - 상태 초기화

**공개 메서드:**
- `start()` - 게임 루프 시작
- `pause()` - 일시정지
- `resume()` - 재개
- `destroy()` - 정리 (RAF 취소, 이벤트 리스너 제거)

**보호 메서드:**
- `setScore(newScore)` - 점수 갱신 + 콜백 호출
- `gameOver()` - 게임 종료, 루프 정지 + 콜백 호출

**루프 구현 (핵심):**
```
loop(timestamp):
  elapsed = timestamp - lastTimestamp
  accumulator += elapsed  (max 200ms cap)

  while accumulator >= fixedDeltaMs:
    update(fixedDeltaMs)
    input.poll()           // ← 반드시 update() 다음에!
    accumulator -= fixedDeltaMs

  clearCanvas()
  draw()
  requestAnimationFrame(loop)
```

### 3.3 InputManager (`engine/InputManager.ts`)

**키보드 API:**
- `isKeyDown(key: string): boolean` - 키 누르고 있는지 (연속 입력)
- `isKeyJustPressed(key: string): boolean` - 이번 프레임에 눌렸는지 (단발 입력)
- `poll(): void` - keysJustPressed 초기화 (update() 뒤에 호출)

**마우스 API:**
- `getMousePosition(): {x, y}` - 캔버스 해상도 기준 좌표 (CSS -> 실제 크기 변환)
- `isMouseDown(button?: number): boolean` - 마우스 버튼 상태 (0=좌)

**기본 동작 차단 키:** Arrow keys, Space, `[`, `]`, `+`, `-`

---

## 4. 게임 레지스트리

### GameRegistryEntry 인터페이스

```typescript
interface GameRegistryEntry {
  id: string;              // URL 경로용 ID
  name: string;            // 표시 이름
  description: string;     // 한 줄 설명
  gpCost: number;          // 플레이 비용 (GP)
  controls: string;        // 조작법 설명
  tags: string[];          // 태그 (classic, puzzle, arcade 등)
  config: GameConfig;      // 캔버스 설정
  create: (canvas, callbacks) => Promise<BaseGame>;  // 팩토리 함수
}
```

### 전체 게임 목록 (26개)

| # | ID | 이름 | GP | W x H | FPS | bgColor | 조작 | 태그 |
|---|-----|------|-----|--------|-----|---------|------|------|
| 1 | pong | Pong | 5 | 1280x800 | 60 | #0a0a1a | Arrow Up/Down | classic, versus |
| 2 | snake | Snake | 5 | 820x820 | 60 | #0f1923 | Arrow Keys | classic, survival |
| 3 | tetris | Tetris | 10 | 520x640 | 60 | #0a0c1a | Arrows + Space | classic, puzzle |
| 4 | space-invaders | Space Invaders | 10 | 800x800 | 60 | #060610 | Left/Right + Space | classic, shooter |
| 5 | falling-sand | Falling Sand | 5 | 800x640 | 120 | #0a0c14 | Click + 1/2/3/4 | sandbox, physics |
| 6 | breakout | Breakout | 5 | 900x640 | 60 | #0a0c1a | Left/Right + Space | classic, arcade |
| 7 | 2048 | 2048 | 5 | 520x620 | 60 | #0a0c1a | Arrow Keys | puzzle, strategy |
| 8 | asteroids | Asteroids | 5 | 800x800 | 60 | #060610 | Arrows + Space | classic, shooter |
| 9 | pacman | Pac-Man | 10 | 640x740 | 60 | #060610 | Arrow Keys | classic, arcade |
| 10 | solitaire | Solitaire | 5 | 660x900 | 60 | #0a0c14 | Mouse drag & drop | classic, cards |
| 11 | connect4 | Connect Four | 5 | 620x680 | 60 | #0a0c1a | Mouse click | classic, strategy |
| 12 | tower-defense | Tower Defense | 10 | 760x680 | 60 | #0a0c14 | Mouse + 1/2/3 | strategy, tower-defense |
| 13 | rhythm | Rhythm | 10 | 520x700 | 60 | #0a0c14 | D/F/J/K | rhythm, arcade |
| 14 | wordle | Wordle | 5 | 480x680 | 60 | #0a0c14 | Keyboard + Mouse | puzzle, word |
| 15 | checkers | Checkers | 5 | 640x700 | 60 | #0a0c14 | Mouse click | classic, strategy |
| 16 | sudoku | Sudoku | 5 | 540x700 | 60 | #0a0c14 | Mouse + Number keys | puzzle, logic |
| 17 | memory-match | Memory Match | 5 | 560x640 | 60 | #0a0c14 | Mouse click | puzzle, memory |
| 18 | hangman | Hangman | 5 | 480x680 | 60 | #0a0c14 | Keyboard + Mouse | word, classic |
| 19 | bubble-shooter | Bubble Shooter | 5 | 480x700 | 60 | #0a0c14 | Mouse aim + click | arcade, puzzle |
| 20 | typing | Type Attack | 5 | 640x640 | 60 | #0a0c14 | Keyboard | arcade, typing |
| 21 | brick-builder | Brick Builder | 5 | 520x700 | 60 | #0a0c14 | Mouse drag & drop | puzzle, strategy |
| 22 | sokoban | Sokoban | 5 | 560x620 | 60 | #0a0c14 | Arrow Keys + Z/R | puzzle, classic |
| 23 | simon-says | Simon Says | 5 | 480x560 | 60 | #0a0c14 | Mouse + Q/W/A/S | memory, arcade |
| 24 | doodle-jump | Doodle Jump | 5 | 400x700 | 60 | #0a0c14 | Left/Right + Space | arcade, platformer |
| 25 | whack-a-mole | Whack-a-Mole | 5 | 520x620 | 60 | #0a0c14 | Mouse click | arcade, reflex |
| 26 | pipe-puzzle | Pipe Puzzle | 5 | 520x640 | 60 | #0a0c14 | Mouse click to rotate | puzzle, logic |

---

## 5. 게임별 상세 구현

### 5.1 Pong (`pong/PongGame.ts`)

- **클래스:** PongGame
- **캔버스:** 1280x800, #0a0a1a
- **입력:** 키보드 (ArrowUp/Down)
- **localStorage:** 없음
- **핵심 상수:** BALL_SIZE=16, PADDLE_W=14, WIN_SCORE=7
- **난이도:**
  - `_ballSpeed`: diffValue(d, 10, 15, 22)
  - `_paddleH`: diffValue(d, 140, 110, 80)
  - `_paddleSpeed`: diffValue(d, 9, 7, 5)
- **특징:** AI 패들 (150ms 반응 딜레이, ±60px 부정확성), 볼 트레일 이펙트 12개, 패들 히트 시 볼 가속, 스코어 플래시

### 5.2 Snake (`snake/SnakeGame.ts`)

- **클래스:** SnakeGame
- **캔버스:** 820x820, #0f1923
- **입력:** 키보드 (Arrow keys)
- **localStorage:** "snake-best"
- **핵심 상수:** 25x25 그리드, CELL=28px, 오프셋 60px
- **난이도:**
  - `_moveInterval`: diffValue(d, 180, 130, 80) ms
- **특징:** 방향 전환 (180도 방지), 머리에 방향별 눈, 몸통 그라디언트 색상, 먹이 펄스 애니메이션

### 5.3 Tetris (`tetris/TetrisGame.ts` + `blocks.ts`)

- **클래스:** TetrisGame
- **캔버스:** 520x640, #0a0c1a
- **입력:** 키보드 (Arrows, Space)
- **localStorage:** 없음
- **핵심 상수:** 10x20 그리드, CELL=30px, 오프셋 (15, 15)
- **난이도:**
  - `_dropInterval`: diffValue(d, 350, 215, 120) ms
- **특징:** 7-bag 랜덤, 벽킥 회전 (±1 수평 이동), 고스트 피스 프리뷰, 하드드롭 (+2pts/행), 레벨별 속도 증가
- **점수:** 1줄=100, 2줄=300, 3줄=500, 4줄=800
- **블록 7종:** L(green), J(red), I(orange), O(yellow), S(purple), T(cyan), Z(blue)

### 5.4 Space Invaders (`space-invaders/SpaceInvadersGame.ts`)

- **클래스:** SpaceInvadersGame
- **캔버스:** 800x800, #060610
- **입력:** 키보드 (ArrowLeft/Right, Space)
- **localStorage:** "si-best"
- **핵심 상수:** 55 aliens (5x11), 4 obstacles (23x13 그리드, 3px 블록), 함선 48x32px
- **난이도:**
  - `_shipSpeed`: diffValue(d, 8, 6, 5)
  - `_lives`: diffValue(d, 5, 3, 2)
  - `_alienSpeedMul`: diffValue(d, 0.7, 1, 1.4)
  - `_laserDelay`: diffValue(d, 180, 250, 350) ms
- **특징:** 미스터리 쉽 (500pts, 4-8초 간격), 장애물 파괴, 레벨 진행, 별 배경 (120개 파티클)

### 5.5 Falling Sand (`falling-sand/FallingSandGame.ts`)

- **클래스:** FallingSandGame
- **캔버스:** 800x640, #0a0c14, **120 FPS**
- **입력:** 키보드 (1/2/3/4 또는 S/R/W/E) + 마우스
- **난이도:** 없음 (샌드박스)
- **핵심 상수:** 80x60 그리드, 10px 셀, 상단 40px UI 영역
- **모드:** Sand (갈색), Rock (회색), Water (파랑), Erase
- **특징:** HSV→RGB 절차적 색상, 입자 물리 (중력, 확산), 마우스 브러시 (3px)

### 5.6 Breakout (`breakout/BreakoutGame.ts`)

- **클래스:** BreakoutGame
- **캔버스:** 900x640, #0a0c1a
- **입력:** 키보드 (ArrowLeft/Right, Space)
- **localStorage:** "breakout-best"
- **핵심 상수:** PADDLE_H=14, BALL_R=8, BRICK_ROWS=7, BRICK_COLS=12
- **난이도:**
  - `_ballSpeed`: diffValue(d, 7, 10, 14)
  - `_paddleW`: diffValue(d, 150, 120, 90)

### 5.7 2048 (`2048/Game2048.ts`)

- **클래스:** Game2048
- **캔버스:** 520x620, #0a0c1a
- **입력:** 키보드 (Arrow keys)
- **localStorage:** "2048-best"
- **핵심 상수:** GRID=4, CELL=110, GAP=10
- **난이도:** 없음

### 5.8 Asteroids (`asteroids/AsteroidsGame.ts`)

- **클래스:** AsteroidsGame
- **캔버스:** 800x800, #060610
- **입력:** 키보드 (ArrowLeft/Right/Up, Space)
- **localStorage:** "asteroids-best"
- **핵심 상수:** SHIP_SIZE=18, TURN_SPEED=0.065, THRUST=0.12, BULLET_SPEED=9, BULLET_LIFE=700ms
- **난이도:**
  - `_asteroidSpeed`: diffValue(d, 1.0, 1.5, 2.2)
  - `_fireCooldownMax`: diffValue(d, 100, 150, 220)

### 5.9 Pac-Man (`pacman/PacManGame.ts`)

- **클래스:** PacManGame
- **캔버스:** 640x740, #060610
- **입력:** 키보드 (Arrow keys)
- **localStorage:** "pacman-best"
- **핵심 상수:** 19x21 그리드, CELL=32px, PAC_SPEED=5.5, SCARED_SPEED=2.5
- **난이도:**
  - `_ghostSpeed`: diffValue(d, 3.5, 4.5, 5.5)
  - `_scaredMs`: diffValue(d, 9000, 7000, 5000)
- **특징:** 미로, 4마리 고스트 AI, 도트, 파워업

### 5.10 Solitaire (`solitaire/SolitaireGame.ts`)

- **클래스:** SolitaireGame
- **캔버스:** 660x900, #0a0c14
- **입력:** 마우스 (드래그 앤 드롭)
- **localStorage:** 없음
- **핵심 상수:** CW=80, CH=112, SP=12
- **난이도:** 없음 (RNG 기반)

### 5.11 Connect Four (`connect4/Connect4Game.ts`)

- **클래스:** Connect4Game
- **캔버스:** 620x680, #0a0c1a
- **입력:** 마우스 (컬럼 클릭)
- **localStorage:** "connect4-best"
- **핵심 상수:** 7열 x 6행, CELL=76, RAD=30
- **난이도:**
  - `_aiDepth`: diffValue(d, 2, 5, 7) — Minimax alpha-beta 탐색 깊이
- **특징:** 드롭 애니메이션, 승리 셀 글로우, CPU 400ms 딜레이

### 5.12 Tower Defense (`tower-defense/TowerDefenseGame.ts`)

- **클래스:** TowerDefenseGame
- **캔버스:** 760x680, #080816
- **입력:** 키보드 (1/2/3, Escape, Space) + 마우스
- **localStorage:** "td-best"
- **핵심 상수:** 20x14 그리드, CELL=36, 타워 비용 20/40/30, 타워 사거리 3.2/2.8/3.0
- **난이도:**
  - `_initLives`: diffValue(d, 30, 20, 12)
  - `_initGold`: diffValue(d, 150, 100, 70)
  - `_hpMul`: diffValue(d, 0.7, 1, 1.4)
  - `_spdMul`: diffValue(d, 0.8, 1, 1.2)

### 5.13 Rhythm (`rhythm/RhythmGame.ts`)

- **클래스:** RhythmGame
- **캔버스:** 520x700, #0a0c14
- **입력:** 키보드 (D/F/J/K)
- **localStorage:** 없음
- **핵심 상수:** 4레인, LANE_W=90, HIT_Y=580, PERFECT=100pts, GOOD=50pts, BASE_BPM=120
- **난이도:**
  - `_noteSpeed`: diffValue(d, 0.35, 0.5, 0.7)
  - `_perfectWindow`: diffValue(d, 55, 40, 28)
  - `_maxHp`: diffValue(d, 14, 10, 7)

### 5.14 Wordle (`wordle/WordleGame.ts`)

- **클래스:** WordleGame
- **캔버스:** 480x680, #0a0c14
- **입력:** 키보드 (A-Z, Backspace, Enter) + 마우스 (화면 키보드)
- **localStorage:** 없음
- **핵심 상수:** COLS=5, TILE_SIZE=58, TILE_GAP=6, 200+ 단어 배열
- **난이도:**
  - `_rows`: diffValue(d, 8, 6, 5) — 시도 횟수
- **색상:** GREEN=#538d4e, YELLOW=#b59f3b, GRAY=#3a3a3c

### 5.15 Checkers (`checkers/CheckersGame.ts`)

- **클래스:** CheckersGame
- **캔버스:** 640x700, #0a0c14
- **입력:** 마우스 (클릭)
- **localStorage:** 없음
- **핵심 상수:** 8x8 보드, CELL=72, PRAD=28 (말 반지름)
- **난이도:**
  - `_baseDepth`: diffValue(d, 2, 4, 6) — AI 탐색 깊이
- **색상:** PLAYER=#00d4ff (cyan), AI=#ff4466 (red), KING=#ffd700 (gold)

### 5.16 Sudoku (`sudoku/SudokuGame.ts`)

- **클래스:** SudokuGame
- **캔버스:** 540x700, #0a0c14
- **입력:** 키보드 (1-9, Arrow, Backspace) + 마우스
- **localStorage:** 없음
- **핵심 상수:** 9x9 그리드, CELL=52
- **난이도:**
  - `_removeCount`: diffValue(d, 28, 40, 52) — 제거할 숫자 수
- **색상:** CLR_FIXED=#ffffff, CLR_PLAYER=#00d4ff, CLR_CONFLICT=#ff4466

### 5.17 Memory Match (`memory-match/MemoryMatchGame.ts`)

- **클래스:** MemoryMatchGame
- **캔버스:** 560x640, #0a0c14
- **입력:** 마우스 (카드 클릭)
- **localStorage:** 없음
- **핵심 상수:** 9레벨 정의 (4x4~), CARD_GAP=12, FLIP_DURATION=300ms, 16개 유니코드 심볼
- **난이도:**
  - `_flipMul`: diffValue(d, 1.4, 1, 0.7) — 카드 뒤집기 딜레이 배율

### 5.18 Hangman (`hangman/HangmanGame.ts`)

- **클래스:** HangmanGame
- **캔버스:** 480x680, #0a0c14
- **입력:** 키보드 (A-Z) + 마우스 (화면 키보드)
- **localStorage:** 없음
- **핵심 상수:** 100+ 단어 (Animal, Food, Country, Sport, Color, Nature, Music 카테고리)
- **난이도:**
  - `_maxWrong`: diffValue(d, 9, 6, 4)
- **색상:** NEON_CYAN=#00d4ff, NEON_GREEN=#00ff88, NEON_RED=#ff3366

### 5.19 Bubble Shooter (`bubble-shooter/BubbleShooterGame.ts`)

- **클래스:** BubbleShooterGame
- **캔버스:** 480x700, #0a0c14
- **입력:** 마우스 (조준 + 클릭)
- **localStorage:** 없음
- **핵심 상수:** BUBBLE_R=16, GRID_COLS=13, GRID_TOP=60, 6가지 버블 색상
- **난이도:**
  - `_shootSpeed`: diffValue(d, 10, 12, 15)

### 5.20 Type Attack (`typing/TypingGame.ts`)

- **클래스:** TypingGame
- **캔버스:** 640x640, #0a0c14
- **입력:** 키보드 (A-Z, Backspace, Escape, Space)
- **localStorage:** 없음
- **핵심 상수:** DANGER_ZONE_Y=580, 200+ 단어 (3-8글자), spawnInterval=2500ms, baseSpeed=30px/s
- **난이도:**
  - `_baseLives`: diffValue(d, 5, 3, 2)
  - `_spawnMul`: diffValue(d, 1.4, 1, 0.6)
  - `_speedMul`: diffValue(d, 0.7, 1, 1.4)

### 5.21 Brick Builder (`brick-builder/BrickBuilderGame.ts`)

- **클래스:** BrickBuilderGame
- **캔버스:** 520x700, #0a0c14
- **입력:** 마우스 (드래그 앤 드롭)
- **localStorage:** 없음
- **핵심 상수:** BOARD_SIZE=10, CELL=42, CELL_GAP=2
- **난이도:** 없음 (창작 게임)

### 5.22 Sokoban (`sokoban/SokobanGame.ts`)

- **클래스:** SokobanGame
- **캔버스:** 560x620, #0a0c14
- **입력:** 키보드 (Arrow keys, Z=undo, R=reset)
- **localStorage:** 없음
- **핵심 상수:** 25개 레벨, animDuration=100ms
- **난이도:** 없음 (고정 퍼즐)

### 5.23 Simon Says (`simon-says/SimonSaysGame.ts`)

- **클래스:** SimonSaysGame
- **캔버스:** 480x560, #0a0c14
- **입력:** 키보드 (Q/W/A/S 또는 Arrow keys) + 마우스
- **localStorage:** 없음
- **핵심 상수:** BTN_SIZE=180, BTN_GAP=20, SUCCESS_DISPLAY_MS=800
- **난이도:**
  - lightMs/gapMs 타이밍 배율: diffValue(d, 1.4, 1, 0.7)

### 5.24 Doodle Jump (`doodle-jump/DoodleJumpGame.ts`)

- **클래스:** DoodleJumpGame
- **캔버스:** 400x700, #0a0c14
- **입력:** 키보드 (ArrowLeft/Right 또는 A/D, Space=발사)
- **localStorage:** 없음
- **핵심 상수:** GRAVITY=0.45, JUMP_FORCE=-12.5, MOVE_SPEED=5.5, PLAT_GAP_MIN=50
- **난이도:**
  - `_monsterSpawnChance`: diffValue(d, 0.04, 0.08, 0.14)
  - `_platGapMax`: diffValue(d, 100, 130, 170)

### 5.25 Whack-a-Mole (`whack-a-mole/WhackAMoleGame.ts`)

- **클래스:** WhackAMoleGame
- **캔버스:** 520x620, #0a0c14
- **입력:** 마우스 (클릭)
- **localStorage:** 없음
- **핵심 상수:** 3x3 그리드, HOLE_RX=52, MOLE_RADIUS=36
- **난이도:**
  - `_gameDuration`: diffValue(d, 75000, 60000, 45000) ms
  - `_visMul`: diffValue(d, 1.3, 1, 0.7)

### 5.26 Pipe Puzzle (`pipe-puzzle/PipePuzzleGame.ts`)

- **클래스:** PipePuzzleGame
- **캔버스:** 520x640, #0a0c14
- **입력:** 마우스 (클릭으로 파이프 회전)
- **localStorage:** 없음
- **핵심 상수:** gridSize 5(Lv1-3), 6(Lv4-6), 7(Lv7+), DIR_TOP/RIGHT/BOTTOM/LEFT
- **난이도:** 없음 (고정 퍼즐)

---

## 6. UI 컴포넌트

### 6.1 Sidebar (`layout/Sidebar.tsx`)

좌측 고정 사이드바 (w-72). glass 스타일.

- **Header**: "S" 로고 뱃지 + "Seri Arcade" 타이틀
- **UserPanel**: GP 잔액 + 프로필 + 설정
- **GameList**: 게임 목록 네비게이션
- **Footer**: 버전 정보

### 6.2 UserPanel (`layout/UserPanel.tsx`)

- 아바타 이미지 (32x32, `/images/avatars/[id].png`, SVG 폴백)
- 닉네임 표시 (기본 "Guest")
- 톱니바퀴 설정 버튼
- GP 잔액 (현재/일일 한도, 진행 바, 골드 그라디언트)
- SettingsModal 렌더링

### 6.3 GameList / GameListItem (`layout/`)

- `usePathname()` 으로 현재 활성 게임 감지
- 각 게임 항목: 아이콘 뱃지 (첫 글자) + 이름 + 설명 + GP 비용
- 활성 상태: accent 색상, glass 배경
- 클릭 시 `/play/{game.id}` 이동

### 6.4 SettingsModal (`layout/SettingsModal.tsx`)

Props: `{ open: boolean, onClose: () => void }`

- **오버레이**: fixed inset-0, z-50, bg-black/60, backdrop-blur
- **모달**: glass, w-[380px], max-h-[85vh], 스크롤 가능
- **아바타 선택**: grid-cols-5, aspect-square, accent 보더 + 체크마크
- **닉네임**: text input (max 20자), blur/Enter 시 저장
- **난이도 슬라이더**: range 1-5, 라벨 + 틱 마크
- **닫기**: ESC 키 / 오버레이 클릭

### 6.5 GameCanvas (`game/GameCanvas.tsx`)

Props: `{ gameEntry: GameRegistryEntry }`

- **반응형 스케일링**: 컨테이너 → 캔버스 비율 계산 (max 1.0)
- **게임 라이프사이클**: unmount/게임 변경 시 정리, GP 차감 후 게임 시작
- **오버레이 상태 관리**: idle → start, game_over → gameover
- **리사이즈**: window resize 이벤트 대응

### 6.6 GameOverlay (`game/GameOverlay.tsx`)

**Start 오버레이:**
- 게임 이름, GP 비용, 시작 버튼 또는 GP 부족 메시지

**Game Over 오버레이:**
- "GAME OVER" 라벨, 점수 표시, 재시작 버튼 또는 GP 부족 메시지

**버튼**: 그라디언트 (accent → cyan), hover/active 스케일 애니메이션

---

## 7. 상태 관리 (Zustand)

### 7.1 GP Store (`store/useGpStore.ts`)

```typescript
interface GpStore {
  balance: number;       // 현재 GP
  dailyAmount: number;   // 일일 한도 (1000)
  isLoaded: boolean;     // 초기화 완료 플래그
  initialize: () => void;
  deductGp: (amount: number) => boolean;
  canAfford: (amount: number) => boolean;
}
```

### 7.2 Settings Store (`store/useSettingsStore.ts`)

```typescript
interface SettingsStore {
  nickname: string;      // 닉네임
  avatar: string;        // 아바타 ID
  difficulty: number;    // 1-5
  isLoaded: boolean;     // 초기화 완료 플래그
  initialize: () => void;
  setNickname: (nickname: string) => void;
  setAvatar: (avatar: string) => void;
  setDifficulty: (difficulty: number) => void;
}
```

---

## 8. 유틸리티 라이브러리

### 8.1 GP 유틸 (`lib/gp.ts`)

```typescript
interface GpState {
  balance: number;
  lastResetDate: string;  // YYYY-MM-DD
}

getTodayDate(): string
loadGpState(): GpState       // localStorage 로드, 날짜 변경 시 자동 리셋
resetGp(): GpState           // GP_DAILY_AMOUNT로 초기화
deductGp(amount): { success: boolean, newBalance: number }
```

### 8.2 Settings 유틸 (`lib/settings.ts`)

```typescript
interface SettingsState {
  nickname: string;
  avatar: string;
  difficulty: number;
}

getDefaults(): SettingsState
loadSettings(): SettingsState
updateNickname(nickname): SettingsState   // 20자 제한
updateAvatar(avatar): SettingsState
updateDifficulty(difficulty): SettingsState  // 1-5 클램프
```

**핵심 함수 — `diffValue(difficulty, easyVal, normalVal, hardVal)`:**

```
d=1 → easyVal
d=3 → normalVal
d=5 → hardVal
1<d<3 → easyVal과 normalVal 사이 선형 보간
3<d<5 → normalVal과 hardVal 사이 선형 보간
```

---

## 9. 라우팅 및 페이지

### 9.1 루트 레이아웃 (`app/layout.tsx`)

```
<html lang="en">
  <body>
    <div className="flex h-screen overflow-hidden bg-mesh">
      <Sidebar />
      <main className="flex-1 flex items-center justify-center p-6 overflow-hidden">
        {children}
      </main>
    </div>
  </body>
</html>
```

Metadata: title="Seri Arcade", description="Next-gen browser gaming portal"

### 9.2 홈 페이지 (`app/page.tsx`)

- "S" 로고 + "Seri Arcade" + "Select a game from the sidebar to begin"
- 펄스 도트 + "Ready to play" 상태 표시
- animate-float 적용

### 9.3 게임 플레이 페이지 (`app/play/[gameId]/page.tsx`)

- Client component, `use(params)` 로 gameId 추출
- `getGameById(gameId)` 로 레지스트리 조회
- 없으면 "Game not found" 에러
- 있으면 게임명 + 조작법 뱃지 + `<GameCanvas>` 렌더링

---

## 10. 디자인 시스템

### 10.1 색상 팔레트 (globals.css @theme inline)

| 변수 | 값 | 용도 |
|------|-----|------|
| `--color-bg-primary` | #121529 | 메인 배경 |
| `--color-bg-secondary` | #181c35 | 보조 배경 |
| `--color-bg-card` | rgba(30, 35, 65, 0.6) | 카드 배경 |
| `--color-bg-card-hover` | rgba(40, 46, 80, 0.8) | 카드 호버 |
| `--color-accent` | #6c5ce7 | 메인 액센트 (보라) |
| `--color-accent-light` | #a29bfe | 밝은 액센트 |
| `--color-cyan` | #00d2ff | 시안 |
| `--color-cyan-dim` | rgba(0, 210, 255, 0.15) | 시안 반투명 |
| `--color-magenta` | #ff2e97 | 마젠타 |
| `--color-gold` | #ffd700 | 골드 |
| `--color-gold-dim` | rgba(255, 215, 0, 0.15) | 골드 반투명 |
| `--color-text-primary` | #e8eaf6 | 메인 텍스트 |
| `--color-text-secondary` | #7f8ca3 | 보조 텍스트 |
| `--color-text-muted` | #4a5272 | 흐린 텍스트 |
| `--color-border` | rgba(108, 92, 231, 0.2) | 기본 보더 |
| `--color-border-active` | rgba(108, 92, 231, 0.5) | 활성 보더 |
| `--color-danger` | #ff4757 | 위험/에러 |

### 10.2 폰트

- **Inter** (weights 300-900), Google Fonts CDN @font-face
- Fallback: system-ui, -apple-system, sans-serif

### 10.3 커스텀 CSS 클래스

| 클래스 | 설명 |
|--------|------|
| `.bg-mesh` | 보라+시안+마젠타 radial gradient 배경 |
| `.glass` | 글래스모피즘 (backdrop blur 12px + border) |
| `.glass-hover:hover` | 인터랙티브 글래스 호버 |
| `.glow-cyan` | 시안 텍스트 글로우 |
| `.glow-accent` | 액센트 텍스트 글로우 |
| `.glow-gold` | 골드 텍스트 글로우 |
| `.border-glow` | 그라디언트 보더 (::before pseudo) |
| `.animate-pulse-soft` | 부드러운 불투명도 펄스 (2s) |
| `.animate-float` | 수직 떠다니기 애니메이션 (3s) |

### 10.4 캔버스 렌더링

```css
canvas {
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}
```

### 10.5 스크롤바

- width: 4px
- 트랙: 투명
- 썸: rgba(108, 92, 231, 0.3), 호버 시 0.5

---

## 11. 난이도 시스템

### 전체 요약

| 게임 | 조정 파라미터 | Easy (d=1) | Normal (d=3) | Hard (d=5) |
|------|-------------|-----------|-------------|-----------|
| Pong | ballSpeed | 10 | 15 | 22 |
| Pong | paddleH | 140 | 110 | 80 |
| Pong | paddleSpeed | 9 | 7 | 5 |
| Snake | moveInterval (ms) | 180 | 130 | 80 |
| Tetris | dropInterval (ms) | 350 | 215 | 120 |
| Space Invaders | shipSpeed | 8 | 6 | 5 |
| Space Invaders | lives | 5 | 3 | 2 |
| Space Invaders | alienSpeedMul | 0.7x | 1x | 1.4x |
| Space Invaders | laserDelay (ms) | 180 | 250 | 350 |
| Breakout | ballSpeed | 7 | 10 | 14 |
| Breakout | paddleW | 150 | 120 | 90 |
| Asteroids | asteroidSpeed | 1.0 | 1.5 | 2.2 |
| Asteroids | fireCooldown (ms) | 100 | 150 | 220 |
| Pac-Man | ghostSpeed | 3.5 | 4.5 | 5.5 |
| Pac-Man | scaredMs | 9000 | 7000 | 5000 |
| Connect Four | aiDepth | 2 | 5 | 7 |
| Tower Defense | initLives | 30 | 20 | 12 |
| Tower Defense | initGold | 150 | 100 | 70 |
| Tower Defense | hpMul | 0.7x | 1x | 1.4x |
| Tower Defense | spdMul | 0.8x | 1x | 1.2x |
| Rhythm | noteSpeed | 0.35 | 0.5 | 0.7 |
| Rhythm | perfectWindow | 55 | 40 | 28 |
| Rhythm | maxHp | 14 | 10 | 7 |
| Wordle | rows (시도 횟수) | 8 | 6 | 5 |
| Checkers | baseDepth | 2 | 4 | 6 |
| Sudoku | removeCount | 28 | 40 | 52 |
| Memory Match | flipMul | 1.4x | 1x | 0.7x |
| Hangman | maxWrong | 9 | 6 | 4 |
| Bubble Shooter | shootSpeed | 10 | 12 | 15 |
| Type Attack | baseLives | 5 | 3 | 2 |
| Type Attack | spawnMul | 1.4x | 1x | 0.6x |
| Type Attack | speedMul | 0.7x | 1x | 1.4x |
| Simon Says | timingMul | 1.4x | 1x | 0.7x |
| Doodle Jump | monsterSpawn | 0.04 | 0.08 | 0.14 |
| Doodle Jump | platGapMax | 100 | 130 | 170 |
| Whack-a-Mole | gameDuration (ms) | 75000 | 60000 | 45000 |
| Whack-a-Mole | visMul | 1.3x | 1x | 0.7x |

### 난이도 미적용 게임 (6개)

| 게임 | 사유 |
|------|------|
| 2048 | 순수 퍼즐 (난이도 조절 무의미) |
| Falling Sand | 샌드박스 (승패 없음) |
| Solitaire | RNG 기반 카드 게임 |
| Brick Builder | 창작 게임 (승패 없음) |
| Sokoban | 고정 퍼즐 레벨 |
| Pipe Puzzle | 고정 퍼즐 레벨 |

---

## 12. GP 시스템

- **일일 한도**: 1000 GP (매일 자정 리셋)
- **localStorage 키**: `seri-arcade-gp`
- **리셋 로직**: ISO 날짜 (YYYY-MM-DD) 비교, 날짜 변경 시 자동 리셋
- **차감**: 게임 시작 전 `deductGp(gpCost)` 호출
- **검증**: `canAfford(amount)` → GP 부족 시 에러 오버레이 표시
- **GP 비용**: 대부분 5 GP, 고급 게임 (Tetris, Space Invaders, Pac-Man, Tower Defense, Rhythm) 10 GP

---

## 13. 설정 시스템

- **localStorage 키**: `seri-arcade-settings`
- **항목:**
  - nickname: 문자열 (최대 20자, 기본 "Guest")
  - avatar: 아바타 ID (기본 "avatar_001")
  - difficulty: 1-5 (기본 3)
- **아바타 옵션**: avatar_001, avatar_009, avatar_016, avatar_017, avatar_024, avatar_025 (6개)
- **아바타 이미지**: `public/images/avatars/[id].png` (각 ~95KB PNG)
- **난이도 라벨**: 1=Very Easy, 2=Easy, 3=Normal, 4=Hard, 5=Very Hard

---

## 14. 개발 시 주의사항

### 게임 추가 절차

1. `src/games/[id]/[ClassName].ts` 생성 (BaseGame 상속)
2. `CONFIG` 객체 정의 (id, width, height, fps, backgroundColor)
3. `init()`, `update(dt)`, `draw()`, `reset()` 구현
4. `src/games/index.ts` 레지스트리에 항목 추가
5. 난이도 적용 시: `useSettingsStore`, `diffValue` import + `resetState()`에서 호출

### InputManager 규칙

- **`poll()` 은 반드시 `update()` 다음에 호출** (BaseGame이 자동 처리)
- `isKeyDown()`: 연속 입력 (Pong 패들, Space Invaders 이동)
- `isKeyJustPressed()`: 단발 입력 (Snake 방향, Tetris 회전, 메뉴 선택)
- poll() 전에 호출하면 isKeyJustPressed가 항상 false 반환

### Canvas 좌표

- 마우스 좌표는 CSS 크기 → 캔버스 해상도로 자동 변환 (InputManager)
- 게임 코드에서는 항상 CONFIG의 width/height 기준으로 좌표 사용

### 게임 종료

- `this.gameOver()` 호출 시 루프 즉시 정지
- 게임 내 "Press SPACE to restart" 같은 코드는 동작하지 않음 (React 오버레이가 처리)

### 레지스트리 CONFIG 일치

- `index.ts`의 config (width, height, backgroundColor)는 게임 클래스의 CONFIG와 반드시 동일해야 함
- 불일치 시 캔버스 크기 관련 버그 발생

### Tailwind CSS v4

- 테마는 `globals.css` 의 `@theme inline {}` 블록에 정의
- tailwind.config.ts 사용하지 않음
- 커스텀 색상은 `--color-[name]` 형식의 CSS 변수로 정의

### localStorage 키 목록

| 키 | 용도 |
|----|------|
| `seri-arcade-gp` | GP 잔액 + 마지막 리셋 날짜 |
| `seri-arcade-settings` | 닉네임, 아바타, 난이도 |
| `snake-best` | Snake 최고 점수 |
| `breakout-best` | Breakout 최고 점수 |
| `2048-best` | 2048 최고 점수 |
| `asteroids-best` | Asteroids 최고 점수 |
| `pacman-best` | Pac-Man 최고 점수 |
| `td-best` | Tower Defense 최고 점수 |
| `si-best` | Space Invaders 최고 점수 |
| `connect4-best` | Connect Four 승수 |
